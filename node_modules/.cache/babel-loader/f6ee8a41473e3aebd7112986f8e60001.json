{"ast":null,"code":"var _jsxFileName = \"/Users/ana/Desktop/project-3/client/src/components/Map.js\";\nimport React, { Component } from 'react';\nimport mapStyle from '../mapStyles';\nimport { BrowserRouter, Link } from \"react-router-dom\";\nimport ReactDOMServer from \"react-dom/server\";\nimport LocationDetails from './LocationDetails';\nexport default class Map extends Component {\n  constructor(props) {\n    super(props);\n\n    this.loadScript = url => {\n      let index = window.document.getElementsByTagName('script')[0];\n      let script = window.document.createElement('script');\n      script.src = url;\n      script.async = true;\n      script.defer = true;\n      index.parentNode.insertBefore(script, index);\n    };\n\n    this.renderMap = () => {\n      this.loadScript(\"https://maps.googleapis.com/maps/api/js?key=\".concat(process.env.REACT_APP_GOOGLE_KEY, \"&libraries=places&callback=initMap\"));\n      window.initMap = this.initMap;\n    };\n\n    this.hello = () => {\n      console.log('Hello');\n    };\n\n    this.InfoWindowContent = location => {\n      return React.createElement(\"div\", {\n        className: \"container-infoWindow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, location.title), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, location._id), React.createElement(\"img\", {\n        className: \"image-infoWindow\",\n        src: location.imageUrl[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(BrowserRouter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: {\n          pathname: '/details',\n          state: this.state.notifications\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \" \", React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Details\"), \" \")));\n    };\n\n    this.addMarker = () => {\n      for (let locations = 0; locations < this.props.allLocations.length; locations++) {\n        const lat = this.props.allLocations[locations].lat;\n        const lng = this.props.allLocations[locations].lng;\n        let marker = new window.google.maps.Marker({\n          position: {\n            lat: lat,\n            lng: lng\n          },\n          map: this.state.map\n        });\n        let infowindow = new window.google.maps.InfoWindow({\n          content: ''\n        });\n        marker.addListener('click', () => {\n          const content = ReactDOMServer.renderToString(this.InfoWindowContent(this.props.allLocations[locations]));\n          infowindow.setContent(content);\n          infowindow.open(this.map, marker);\n        });\n        let markersCopy = [...this.state.markers];\n        markersCopy.push(marker);\n        this.setState({\n          markers: markersCopy\n        });\n      }\n    };\n\n    this.initMap = () => {\n      var myLatlng = {\n        lat: 25.7617,\n        lng: -80.1918\n      };\n      let map = new window.google.maps.Map(document.getElementById('map'), {\n        styles: mapStyle,\n        disableDoubleClickZoom: true\n      });\n      navigator.geolocation.getCurrentPosition(function (position) {\n        // Center on user's current location if geolocation prompt allowed\n        var initialLocation = new window.google.maps.LatLng(position.coords.latitude, position.coords.longitude - 0.7);\n        map.setCenter(initialLocation);\n        map.style = mapStyle;\n        map.setZoom(9);\n      }, function (positionError) {\n        // User denied geolocation prompt - default to Chicago\n        map.setCenter(new window.google.maps.LatLng(35.74750449199224, -86.7035884912965));\n        map.style = mapStyle;\n        map.setZoom(5);\n      });\n      this.setState({\n        map: map\n      });\n      map.addListener('dblclick', e => {\n        this.props.addLocationToggle();\n        this.props.inputCoordinatesHandle(e);\n      });\n      this.addMarker();\n    };\n\n    this.setMapOnAll = map => {\n      for (var i = 0; i < this.markers.length; i++) {\n        this.markers[i].setMap(map);\n      }\n    };\n\n    this.showMarkers = () => {\n      this.setMapOnAll(this.state.map);\n    };\n\n    this.state = {\n      map: '',\n      markers: [],\n      notifications: 'Anabelita'\n    };\n  }\n\n  componentDidMount() {\n    this.renderMap();\n  }\n\n  componentDidUpdate(prevprops, prevstate) {\n    if (prevprops.allLocations.length !== this.props.allLocations.length) {\n      this.addMarker();\n    }\n  }\n\n  render() {\n    return React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"map\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/ana/Desktop/project-3/client/src/components/Map.js"],"names":["React","Component","mapStyle","BrowserRouter","Link","ReactDOMServer","LocationDetails","Map","constructor","props","loadScript","url","index","window","document","getElementsByTagName","script","createElement","src","async","defer","parentNode","insertBefore","renderMap","process","env","REACT_APP_GOOGLE_KEY","initMap","hello","console","log","InfoWindowContent","location","title","_id","imageUrl","pathname","state","notifications","addMarker","locations","allLocations","length","lat","lng","marker","google","maps","Marker","position","map","infowindow","InfoWindow","content","addListener","renderToString","setContent","open","markersCopy","markers","push","setState","myLatlng","getElementById","styles","disableDoubleClickZoom","navigator","geolocation","getCurrentPosition","initialLocation","LatLng","coords","latitude","longitude","setCenter","style","setZoom","positionError","e","addLocationToggle","inputCoordinatesHandle","setMapOnAll","i","setMap","showMarkers","componentDidMount","componentDidUpdate","prevprops","prevstate","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport mapStyle from '../mapStyles';\nimport { BrowserRouter, Link } from \"react-router-dom\";\nimport ReactDOMServer from \"react-dom/server\";\nimport LocationDetails from './LocationDetails'\n\n\nexport default class Map extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      map:'',\n      markers: [],\n      notifications: 'Anabelita'\n    }\n  }\n\n  componentDidMount(){\n    this.renderMap();\n  }\n\n  componentDidUpdate(prevprops, prevstate){\n    if(prevprops.allLocations.length !== this.props.allLocations.length){\n      this.addMarker();\n    }\n  }\n\n\n  loadScript=(url)=>{\n    let index = window.document.getElementsByTagName('script')[0];\n    let script = window.document.createElement('script');\n    script.src = url;\n    script.async = true;\n    script.defer = true;\n    index.parentNode.insertBefore(script,index);\n  }\n\n  renderMap=()=>{\n    this.loadScript(`https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_KEY}&libraries=places&callback=initMap`);\n    window.initMap = this.initMap;\n  }\n\n\n  hello=()=>{\n    console.log('Hello')\n  }\n\n    InfoWindowContent =(location)=>{\n      return(\n        <div className=\"container-infoWindow\">\n          <h6>{location.title}</h6>\n          <h1>{location._id}</h1>\n          <img className=\"image-infoWindow\" src={location.imageUrl[0]}/>\n          <BrowserRouter> \n          <Link to={{\n              pathname:'/details',\n              state:this.state.notifications,\n            }}> <h1>Details</h1> </Link>\n            </BrowserRouter> \n          {/* <BrowserRouter> \n            {/* <Link  to={{\n              pathname: \"/details\",\n              state: { theLocation: true }\n              }}>Details</Link> */}\n              {/* <Link to={`/${location._id}`}>Details </Link>\n          </BrowserRouter> */} \n        </div>\n      )\n    }\n\n  addMarker = () => {\n    for(let locations = 0; locations < this.props.allLocations.length; locations++){\n        const lat = this.props.allLocations[locations].lat;\n        const lng = this.props.allLocations[locations].lng;\n        \n        let marker = new window.google.maps.Marker({\n          position: {lat: lat, lng: lng},\n          map: this.state.map\n        });\n\n        let infowindow = new window.google.maps.InfoWindow({\n          content:'',\n        });\n\n        marker.addListener('click', ()=>{\n          const content = ReactDOMServer.renderToString(this.InfoWindowContent(this.props.allLocations[locations]));\n      \n          infowindow.setContent(content);\n          infowindow.open(this.map, marker);\n        });\n\n\n        let markersCopy = [...this.state.markers] \n\n        markersCopy.push(marker);\n        this.setState({\n          markers:markersCopy\n        });\n    }\n  }\n\n  initMap = () =>  {\n\n\n    var myLatlng = {lat:25.7617,lng:-80.1918}\n  \n      let map = new window.google.maps.Map(document.getElementById('map'),{styles: mapStyle,disableDoubleClickZoom: true });\n\n      navigator.geolocation.getCurrentPosition(function(position) {\n        // Center on user's current location if geolocation prompt allowed\n        var initialLocation = new window.google.maps.LatLng(position.coords.latitude, position.coords.longitude-0.7);\n        map.setCenter(initialLocation);\n        map.style=mapStyle;\n        map.setZoom(9);\n      }, function(positionError) {\n        // User denied geolocation prompt - default to Chicago\n        map.setCenter(new window.google.maps.LatLng(35.74750449199224, -86.7035884912965));\n        map.style=mapStyle;\n        map.setZoom(5);\n  });\n\n      this.setState({\n        map:map,\n      })\n\n      map.addListener('dblclick',(e)=>{\n        this.props.addLocationToggle();\n        this.props.inputCoordinatesHandle(e);\n    })\n\n      this.addMarker();\n    }\n\n    setMapOnAll = (map) => {\n      for (var i = 0; i < this.markers.length; i++) {\n        this.markers[i].setMap(map);\n      }\n    }\n\n    showMarkers = () => {\n      this.setMapOnAll(this.state.map);\n    }\n    \n    \n\n  render() {\n    return (\n      <main>\n        <div id=\"map\"></div> \n      </main>\n    )\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}