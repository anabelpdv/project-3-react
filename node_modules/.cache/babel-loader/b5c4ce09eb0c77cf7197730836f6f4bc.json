{"ast":null,"code":"import _classCallCheck from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import'./App.css';import axios from\"axios\";import{Switch,Route}from\"react-router-dom\";import Signup from\"./components/user-pages/Signup\";import Home from\"./components/Home\";import Login from\"./components/user-pages/Login\";import Navbar from'./components/Navbar';import LocationDetails from'./components/LocationDetails';import Sidebar from'./components/Sidebar';import MapWrapped from'./components/Map1';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.getAllLocations=function(){axios.get(\"http://localhost:5000/api/locations\").then(function(response){_this.setState({allLocations:response.data,visibleLocations:response.data,ready:true});}).catch(function(err){console.log(err);});};_this.logout=function(){axios.post('http://localhost:5000/api/logout',{}).then(function(response){console.log('This is the data for user###########################',response.data);_this.setState({currentUser:response.userDoc});_this.props.history.push(\"/login\");}).catch(function(err){console.log(err);});};_this.getCurrentCoordinates=function(){navigator.geolocation.getCurrentPosition(function(position){_this.setState({latitude:position.coords.latitude,longitude:position.coords.longitude});},function(positionError){});};_this.state={currentUser:null,allLocations:[],visibleLocations:[],latitude:'',longitude:'',ready:false};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.getAllLocations();this.requestUserToDB();this.getCurrentCoordinates();}},{key:\"requestUserToDB\",value:function requestUserToDB(){var _this2=this;axios.get(\"http://localhost:5000/api/checkuser\",{withCredentials:true}).then(function(response){console.log('Im getting user');var userDoc=response.data.userDoc;_this2.syncCurrentUSer(userDoc);console.log('Check user in app: ',userDoc);}).catch(function(err){console.log(\"Err while getting the user from the checkuser route: \",err);});}},{key:\"syncCurrentUSer\",value:function syncCurrentUSer(user){this.setState({currentUser:user});}},{key:\"render\",value:function render(){var _this3=this;console.log('This is lat:',this.state.latitude);console.log('This is lng:',this.state.longitude);return React.createElement(\"div\",null,React.createElement(Navbar,{currentUser:this.state.currentUser,logout:this.logout}),React.createElement(Sidebar,null),React.createElement(Switch,null,React.createElement(Route,{exact:true,path:\"/\",render:function render(){return React.createElement(Home,{visibleLocations:_this3.state.visibleLocations,ready:_this3.state.ready,getAllLocations:_this3.getAllLocations});}}),React.createElement(Route,{exact:true,path:\"/signup-page\",render:function render(){return React.createElement(Signup,{currentUser:_this3.state.currentUser,onUserChange:function onUserChange(userDoc){return _this3.syncCurrentUSer(userDoc);}});}}),React.createElement(Route,{exact:true,path:\"/login\",render:function render(props){return React.createElement(Login,Object.assign({},props,{currentUser:_this3.state.currentUser,onUserChange:function onUserChange(userDoc){return _this3.syncCurrentUSer(userDoc);}}));}}),React.createElement(Route,{exact:true,path:\"/details/:id\",render:function render(props){return React.createElement(LocationDetails,Object.assign({},props,{visibleLocations:_this3.state.visibleLocations,ready:_this3.state.ready}));}}),React.createElement(Route,{exact:true,path:\"/newMap\",render:function render(props){return React.createElement(\"div\",{className:\"newMap\"},React.createElement(MapWrapped,{latitude:_this3.state.latitude,longitude:_this3.state.longitude,googleMapURL:\"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=\".concat(process.env.REACT_APP_GOOGLE_KEY),loadingElement:React.createElement(\"div\",{style:{height:\"100%\"}}),containerElement:React.createElement(\"div\",{style:{height:\"100%\"}}),mapElement:React.createElement(\"div\",{style:{height:\"100%\"}})}));}})));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/ana/Desktop/project-3/client/src/App.js"],"names":["React","axios","Switch","Route","Signup","Home","Login","Navbar","LocationDetails","Sidebar","MapWrapped","App","props","getAllLocations","get","then","response","setState","allLocations","data","visibleLocations","ready","catch","err","console","log","logout","post","currentUser","userDoc","history","push","getCurrentCoordinates","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","positionError","state","requestUserToDB","withCredentials","syncCurrentUSer","user","process","env","REACT_APP_GOOGLE_KEY","height","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport axios from \"axios\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Signup from \"./components/user-pages/Signup\";\nimport Home from \"./components/Home\";\nimport Login from \"./components/user-pages/Login\";\nimport Navbar from './components/Navbar'\nimport LocationDetails from './components/LocationDetails'\nimport Sidebar from './components/Sidebar'\nimport MapWrapped from './components/Map1'\n\n\nclass App extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      currentUser: null,\n      allLocations:[],\n      visibleLocations:[],\n      latitude:'',\n      longitude:'',\n      ready: false,\n    }\n  }\n\n  componentDidMount(){\n    this.getAllLocations()\n    this.requestUserToDB(); \n    this.getCurrentCoordinates();\n  }\n\n  getAllLocations=()=>{\n    axios.get(\"http://localhost:5000/api/locations\")\n            .then(response=>{\n                this.setState({\n                    allLocations: response.data,\n                    visibleLocations: response.data,\n                    ready:true,\n                })\n            })\n            .catch(err=>{\n            console.log(err)\n            })\n}\n\n  requestUserToDB(){\n    axios.get(\"http://localhost:5000/api/checkuser\", { withCredentials: true })\n        .then(response => {\n          console.log('Im getting user')\n          const { userDoc } = response.data;\n          this.syncCurrentUSer(userDoc);\n          console.log('Check user in app: ', userDoc)\n        })\n        .catch(err=>{\n          console.log(\"Err while getting the user from the checkuser route: \", err)\n        })\n  }\n\n  logout=()=>{\n    axios.post('http://localhost:5000/api/logout',{})\n          .then(response=>{\n            console.log('This is the data for user###########################',response.data)\n            this.setState({\n              currentUser:response.userDoc,\n            })\n            this.props.history.push(`/login`)\n          }) \n          .catch(err=>{\n            console.log(err);\n          })\n  }\n\n  syncCurrentUSer(user){\n    this.setState({ currentUser: user })\n  }\n\n  getCurrentCoordinates = () =>{\n      navigator.geolocation.getCurrentPosition((position)=>{\n        this.setState({\n          latitude:position.coords.latitude,\n          longitude:position.coords.longitude,\n        })\n    \n  },(positionError)=>{\n\n  })\n  }\n\n  \n\n\n  render(){\n\n    console.log('This is lat:',this.state.latitude)\n    console.log('This is lng:',this.state.longitude)\n    \n    return (\n      <div>\n        <Navbar \n          currentUser = { this.state.currentUser }  \n          logout={this.logout}>\n        </Navbar>\n        <Sidebar>\n        </Sidebar>\n        <Switch>\n            <Route exact path=\"/\" render={ ()=>< Home\n                visibleLocations={this.state.visibleLocations}\n                ready={this.state.ready}\n                getAllLocations={this.getAllLocations}\n            /> }   /> \n\n            <Route exact path=\"/signup-page\" render = { () => \n                <Signup \n                  currentUser = { this.state.currentUser }   \n                  onUserChange = { userDoc => this.syncCurrentUSer(userDoc) }   \n                /> \n            }/>\n\n            <Route exact path=\"/login\" render={ (props)=> \n                <Login \n                  {...props} \n                  currentUser = { this.state.currentUser }   \n                  onUserChange = { userDoc => this.syncCurrentUSer(userDoc) }  \n                /> \n            } /> \n\n            <Route exact path=\"/details/:id\" render={(props)=>\n                < LocationDetails \n                {...props}\n                visibleLocations={this.state.visibleLocations}\n                ready={this.state.ready}\n                />\n            }  /> \n\n            <Route exact path=\"/newMap\" render={ (props)=>\n            <div  className=\"newMap\">\n              <MapWrapped \n                latitude={this.state.latitude}\n                longitude={this.state.longitude}\n                googleMapURL={`https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=${\n                  process.env.REACT_APP_GOOGLE_KEY\n                }`}\n                loadingElement={<div style={{ height: `100%` }} />}\n                containerElement={<div style={{ height: `100%` }} />}\n                mapElement={<div style={{ height: `100%` }} />}\n            />\n            </div>\n            }   /> \n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}