{"ast":null,"code":"import _toConsumableArray from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ana/Desktop/project-3/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import mapStyle from'../mapStyles';import{BrowserRouter,Link}from\"react-router-dom\";import ReactDOMServer from\"react-dom/server\";var Map=/*#__PURE__*/function(_Component){_inherits(Map,_Component);function Map(props){var _this;_classCallCheck(this,Map);_this=_possibleConstructorReturn(this,_getPrototypeOf(Map).call(this,props));_this.loadScript=function(url){var index=window.document.getElementsByTagName('script')[0];var script=window.document.createElement('script');script.src=url;script.async=true;script.defer=true;index.parentNode.insertBefore(script,index);};_this.renderMap=function(){_this.loadScript(\"https://maps.googleapis.com/maps/api/js?key=\".concat(process.env.REACT_APP_GOOGLE_KEY,\"&libraries=places&callback=initMap\"));window.initMap=_this.initMap;};_this.InfoWindowContent=function(location){return React.createElement(\"div\",{className:\"container-infoWindow\"},React.createElement(\"h6\",null,location.title),React.createElement(\"h1\",null,location._id),React.createElement(\"img\",{className:\"image-infoWindow\",alt:\"\",src:location.imageUrl[0]}),React.createElement(BrowserRouter,null,React.createElement(Link,{to:\"/details/\".concat(location._id)},\"Details \")));};_this.addMarker=function(){var _loop=function _loop(locations){var lat=_this.props.visibleLocations[locations].lat;var lng=_this.props.visibleLocations[locations].lng;var marker=new window.google.maps.Marker({position:{lat:lat,lng:lng},map:_this.state.map});var infowindow=new window.google.maps.InfoWindow({content:''});marker.addListener('click',function(){var content=ReactDOMServer.renderToString(_this.InfoWindowContent(_this.props.visibleLocations[locations]));infowindow.setContent(content);infowindow.open(_this.map,marker);});var markersCopy=_toConsumableArray(_this.state.markers);markersCopy.push(marker);_this.setState({markers:markersCopy});};for(var locations=0;locations<_this.props.visibleLocations.length;locations++){_loop(locations);}};_this.initMap=function(){var map=new window.google.maps.Map(document.getElementById('map'),{styles:mapStyle,disableDoubleClickZoom:true});navigator.geolocation.getCurrentPosition(function(position){// Center on user's current location if geolocation prompt allowed\nvar initialLocation=new window.google.maps.LatLng(position.coords.latitude,position.coords.longitude-0.7);map.setCenter(initialLocation);map.style=mapStyle;map.setZoom(9);},function(positionError){// User denied geolocation prompt - default to Chicago\nmap.setCenter(new window.google.maps.LatLng(35.74750449199224,-86.7035884912965));map.style=mapStyle;map.setZoom(5);});_this.setState({map:map});map.addListener('dblclick',function(e){_this.props.addLocationToggle();_this.props.inputCoordinatesHandle(e);});_this.addMarker();};_this.setMapOnAll=function(map){for(var i=0;i<_this.markers.length;i++){_this.markers[i].setMap(map);}};_this.showMarkers=function(){_this.setMapOnAll(_this.state.map);};_this.state={//map:'',\nmarkers:[],notifications:'Anabelita'};return _this;}_createClass(Map,[{key:\"componentDidMount\",value:function componentDidMount(){this.renderMap();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevprops,prevstate){if(prevprops.visibleLocations.length!==this.props.visibleLocations.length){this.addMarker();}}},{key:\"render\",value:function render(){return React.createElement(\"main\",null,React.createElement(\"div\",{id:\"map\"}));}}]);return Map;}(Component);export{Map as default};","map":{"version":3,"sources":["/Users/ana/Desktop/project-3/client/src/components/Map.js"],"names":["React","Component","mapStyle","BrowserRouter","Link","ReactDOMServer","Map","props","loadScript","url","index","window","document","getElementsByTagName","script","createElement","src","async","defer","parentNode","insertBefore","renderMap","process","env","REACT_APP_GOOGLE_KEY","initMap","InfoWindowContent","location","title","_id","imageUrl","addMarker","locations","lat","visibleLocations","lng","marker","google","maps","Marker","position","map","state","infowindow","InfoWindow","content","addListener","renderToString","setContent","open","markersCopy","markers","push","setState","length","getElementById","styles","disableDoubleClickZoom","navigator","geolocation","getCurrentPosition","initialLocation","LatLng","coords","latitude","longitude","setCenter","style","setZoom","positionError","e","addLocationToggle","inputCoordinatesHandle","setMapOnAll","i","setMap","showMarkers","notifications","prevprops","prevstate"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport mapStyle from '../mapStyles';\nimport { BrowserRouter, Link } from \"react-router-dom\";\nimport ReactDOMServer from \"react-dom/server\";\n\n\n\nexport default class Map extends Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      //map:'',\n      markers: [],\n      notifications: 'Anabelita'\n    }\n  }\n\n  componentDidMount(){\n    this.renderMap();\n  }\n\n  componentDidUpdate(prevprops, prevstate){\n    if(prevprops.visibleLocations.length !== this.props.visibleLocations.length){\n      this.addMarker();\n    }\n  }\n\n\n  loadScript=(url)=>{\n    let index = window.document.getElementsByTagName('script')[0];\n    let script = window.document.createElement('script');\n    script.src = url;\n    script.async = true;\n    script.defer = true;\n    index.parentNode.insertBefore(script,index);\n  }\n\n  renderMap=()=>{\n    this.loadScript(`https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_KEY}&libraries=places&callback=initMap`);\n    window.initMap = this.initMap;\n  }\n\n\n  InfoWindowContent =(location)=>{\n      return(\n        <div className=\"container-infoWindow\">\n          <h6>{location.title}</h6>\n          <h1>{location._id}</h1>\n          <img className=\"image-infoWindow\" alt=\"\" src={location.imageUrl[0]}/>\n          <BrowserRouter>\n              <Link to={`/details/${location._id}`}>Details </Link>\n          </BrowserRouter> \n        </div>\n      )\n    }\n\n  addMarker = () => {\n    for(let locations = 0; locations < this.props.visibleLocations.length; locations++){\n        const lat = this.props.visibleLocations[locations].lat;\n        const lng = this.props.visibleLocations[locations].lng;\n        \n        let marker = new window.google.maps.Marker({\n          position: {lat: lat, lng: lng},\n          map: this.state.map\n        });\n\n        let infowindow = new window.google.maps.InfoWindow({\n          content:'',\n        });\n\n        marker.addListener('click', ()=>{\n          const content = ReactDOMServer.renderToString(this.InfoWindowContent(this.props.visibleLocations[locations]));\n      \n          infowindow.setContent(content);\n          infowindow.open(this.map, marker);\n        });\n\n\n        let markersCopy = [...this.state.markers] \n\n        markersCopy.push(marker);\n        this.setState({\n          markers:markersCopy\n        });\n    }\n  }\n\n  initMap = () => {\n\n      let map = new window.google.maps.Map(document.getElementById('map'),{styles: mapStyle,disableDoubleClickZoom: true });\n\n      navigator.geolocation.getCurrentPosition(function(position) {\n        // Center on user's current location if geolocation prompt allowed\n        var initialLocation = new window.google.maps.LatLng(position.coords.latitude, position.coords.longitude-0.7);\n        map.setCenter(initialLocation);\n        map.style = mapStyle;\n        map.setZoom(9);\n      }, function(positionError) {\n        // User denied geolocation prompt - default to Chicago\n        map.setCenter(new window.google.maps.LatLng(35.74750449199224, -86.7035884912965));\n        map.style=mapStyle;\n        map.setZoom(5);\n  });\n\n      this.setState({\n        map:map,\n      })\n\n      map.addListener('dblclick',(e)=>{\n        this.props.addLocationToggle();\n        this.props.inputCoordinatesHandle(e);\n    })\n\n      this.addMarker();\n    }\n\n    setMapOnAll = (map) => {\n      for (var i = 0; i < this.markers.length; i++) {\n        this.markers[i].setMap(map);\n      }\n    }\n\n    showMarkers = () => {\n      this.setMapOnAll(this.state.map);\n    }\n    \n    \n\n  render() {\n    return (\n      <main>\n        <div id=\"map\"></div> \n      </main>\n    )\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}